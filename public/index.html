<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <![endif]-->
    <title>Scribe Document Manager</title>
    <!-- BOOTSTRAP CORE STYLE  -->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FONT AWESOME ICONS  -->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!-- CUSTOM STYLE  -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <link href="assets/css/sweetalert.css" rel="stylesheet" />
     <!-- HTML5 Shiv and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <header>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <strong>Email: </strong>info@scribedocuments.com
                    &nbsp;&nbsp;
                    <strong>Support: </strong>+1-800-SCRIBE
                </div>

            </div>
        </div>
    </header>
    <!-- HEADER END-->
    <div class="navbar navbar-inverse set-radius-zero">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">
                    <h3>Scribe</h3>
                    <!--<img src="assets/img/logo.png" />-->
                </a>

            </div>

            <div class="left-div">
                <i class="fa fa-user-plus login-icon" ></i>
        </div>
            </div>
        </div>
    <!-- LOGO HEADER END-->
   
    <!-- MENU SECTION END-->
    <div class="content-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h4 class="page-head-line">Create An Account / Sign In</h4>

                </div>

            </div>
            <div class="row">
                <div class="col-md-6">
                    <h4>Create a <strong>Scribe Account</strong></h4>
                    <br />
                        <label>First Name: </label>
                        <input id="first_name" name="first_name" type="text" class="form-control" />
                        <span class="error-info alert-warning" id="first_name_error">Enter a first name</span><br>
                        <label>Last Name: </label>
                        <input type="text" id="last_name" name="last_name" class="form-control" />
                        <span class="error-info alert-warning" id="last_name_error">Enter a last name</span><br>
                        <label>Email Address: </label>
                        <input type="text" id="email" name="email" class="form-control" />
                        <span class="error-info alert-warning" id="email_error">Enter an address</span><br>
                        <label>Password :  </label>
                        <input type="password" id="password" name="password" class="form-control" />
                        <span class="error-info alert-warning" id="password_empty_error">Enter a password</span><br>
                        <span class="error-info alert-warning too-long" id="password_length_error">Password must not be more than 50 characters</span><br>
                        <hr />
                        <a id="signup_btn" class="btn btn-info"><span class="glyphicon glyphicon-user"></span> &nbsp;Sign Up </a>&nbsp;
                    <br><br>
                </div>
                <div class="col-md-6">
                    <!--<h4> Login with Facebook <strong> / </strong>Google</h4>-->
                    <!--<br />-->
                    <!--<a href="index.html" class="btn btn-social btn-facebook">-->
                        <!--<i class="fa fa-facebook"></i>&nbsp; Facebook Account</a>-->
                    <!--&nbsp;OR&nbsp;-->
                    <!--<a href="index.html" class="btn btn-social btn-google">-->
                        <!--<i class="fa fa-google-plus"></i>&nbsp; Google Account</a>-->
                    <!--<hr />-->
                    <h4> Or Login with your <strong>Scribe Account</strong></h4>
                    <br />
                    <label>Email: </label>
                    <input type="text" id="login_email" name="login_email" class="form-control" />
                    <span class="error-info alert-warning" id="login_email_error">Enter a valid email</span><br>
                    <label>Password :  </label>
                    <input type="password" id="login_password" name="login_password" class="form-control" />
                    <span class="error-info alert-warning" id="login_password_empty_error">Enter a password</span><br>
                    <span class="error-info alert-warning too-long" id="login_password_length_error">Password must not be more than 50 characters</span><br>
                    <hr />
                    <a id="login_btn" class="btn btn-info"><span class="glyphicon glyphicon-user"></span> &nbsp;Log In </a>&nbsp;
                </div>
            </div>
        </div>
    </div>
    <!-- CONTENT-WRAPPER SECTION END-->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p style="text-align: center; vertical-align: middle;">&copy; 2016 Scribe</p>
                </div>
            </div>
        </div>
    </footer>
    <!-- FOOTER SECTION END-->
    <!-- JAVASCRIPT AT THE BOTTOM TO REDUCE THE LOADING TIME  -->
    <!-- CORE JQUERY SCRIPTS -->
    <script src="assets/js/jquery-1.11.1.js"></script>
    <!-- BOOTSTRAP SCRIPTS  -->
    <script src="assets/js/bootstrap.js"></script>
    <script src="assets/js/sweetalert.min.js"></script>
    <script src="assets/js/jscookie.js"></script>
    <script>
        $(document).ready(function(){

            $('.error-info').hide();
            $('#signup_btn').click(function(){
                signUp();
            });

            $('#login_btn').click(function(){
                login();
            });
        });

        function signUp(){
//            alert('called');
            var first_name = $('#first_name').val();
            var last_name = $('#last_name').val();
            var email = $('#email').val();
            var password = $('#password').val();
            var has_error = false;

            var errors = [];

            if(first_name === ""){
                $('#first_name_error').show();
                has_error = true;
//
            }

            if(last_name === ""){
                $('#last_name_error').show();
                has_error = true;
            }

            if(email === "" || !validateEmail(email) ){
                $('#email_error').show();
                has_error = true;
            }

            if(password === ""){
                $('#password_empty_error').show();
                has_error = true;
            }

            if(password.length > 50){
                $('#password_length_error').show();
                has_error = true;
            }

            if(has_error){
                swal({   animation: "slide-from-top", title: "<span style='color: #912a1d'>Hey partner!<br>There are a few errors</span>",   text: "Fix the errors to continue", html: true, type: "warning" });
            }
            else{
                userdata = {first_name: first_name, last_name: last_name, email: email, password: password};
                $.post('/users/signup',userdata,function(data){
                    if(data.status === 'pass'){
                        var user_id = data.user_id;
                        var token = data.token;
                        Cookies.set('user_id',user_id);
                        Cookies.set('token',token);
                        window.location.replace('/user/'+user_id);
                    }
                    else{
                        sweetAlert("Oops...",data.error, "error");
                    }
                });
            }
        }

        function login(){
            var email = $('#login_email').val();
            var password = $('#login_password').val();
            var has_error = false;

            if(email === "" || !validateEmail(email) ){
                has_error = true;
                $('#login_email_error').show();
            }

            if(password === ""){
                has_error = true;
                $('#login_password_empty_error').show();
            }

            if(password.length > 50){
                has_error = true;
                $('#password_length_error').show();
            }

            if(has_error){
                swal({   animation: "slide-from-top", title: "<span style='color: #912a1d'>Hey partner!<br>There are a few errors</span>",   text: "Fix the errors to continue", html: true, type: "warning" });
            }
            else{
                var userdata = {email: email, password: password};
                $.post('/users/signin',userdata,function(data){
                    console.log(data);
                    if(data.status === 'pass'){
                        var user_id = data.user_id;
                        var token = data.token;
                        Cookies.set('user_id',user_id);
                        Cookies.set('token',token);
                        window.location.href = '/user/'+user_id;
                    }
                    else{
                        sweetAlert("Shucks",data.error, "error");
                    }
                });
            }
        }

        function validateEmail(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }
    </script>
</body>
</html>
